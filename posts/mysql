<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.3.0">
<link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/mygo.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/mygo.jpg">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.css" integrity="sha256-gkQVf8UKZgQ0HyuxL/VnacadJ+D2Kox2TCEBuNQg5+w=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-center-simple.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"blog.kayleh.top","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.22.0","exturl":true,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":true,"nav":null,"activeClass":"gitalk"},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7457165067653912"
     crossorigin="anonymous"></script>
    <meta name="description" content="MYSQL索引">
<meta property="og:type" content="blog">
<meta property="og:title" content="MYSQL">
<meta property="og:url" content="https://blog.kayleh.top/posts/mysql">
<meta property="og:site_name" content="Kayleh&#39;s Blog">
<meta property="og:description" content="MYSQL索引">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/3.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/85282.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595843892063.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595843971185.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595844045065.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/384514.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/49986.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595988597583.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595988626819.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595905536134.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595911864015.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595920057502.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595923227254.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595923535216.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595923570837.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595923735876.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595927315197.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595927536666.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595928872305.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595929240606.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595987567416.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595987675026.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596002301273.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596002552181.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596002626747.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596002709087.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596002859369.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596003234330.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596006294816.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596006410428.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596006425805.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596006455254.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596006649311.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596006751196.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596007145091.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596007454015.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596008615453.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596008758503.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596010221763.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596010368374.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596010573507.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596011670611.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596011879046.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596011985825.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596012711619.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596012728741.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596025975416.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596025918356.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596026094589.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596026161365.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596034217829.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596034306983.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596034355686.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596034657083.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596034707674.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596035555366.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596035651547.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596035870103.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596090287752.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596090383772.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596090596937.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596090698031.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596091591987.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596091809527.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596092067130.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596092443607.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596092593809.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596093309432.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596096019383.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596096420658.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596098552860.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596113933906.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596114222051.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596114728723.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596180644843.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596180875682.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596180941151.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596184232403.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596184507560.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596184598926.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596184599055.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596184960579.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596185094308.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596188504073.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596188752818.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596189293802.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596189329303.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596189519955.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596190235561.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596196732744.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596196765703.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596197041821.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596197129161.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596197341176.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596197755173.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596197943115.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596203524363.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596203855006.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596204083288.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596204389262.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596204532873.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596205863651.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596277672469.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596277717456.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596278164535.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596281249332.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596281293913.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596283157110.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596283183562.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596287138753.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596287239538.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596287470060.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596287910808.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596288189317.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596288256700.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596288286059.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596293163830.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596293452648.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596293310415.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596293501087.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596294625538.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596294765205.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596361613254.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596361800362.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596361853689.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596361887110.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596361949063.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596362019625.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596362218502.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596362340762.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596362749535.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596363091362.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596364172827.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596367264611.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596367511520.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596367327059.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596367354502.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596367801141.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596368151351.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596368219445.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596368336057.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596368378801.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596368467316.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596372268011.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596381866992.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596382399568.png">
<meta property="og:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596382484275.png">
<meta property="article:published_time" content="2020-08-02T06:54:25.000Z">
<meta property="article:modified_time" content="2025-02-03T16:14:08.809Z">
<meta property="article:author" content="Kayleh">
<meta property="article:tag" content="sql">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/3.png">


<link rel="canonical" href="https://blog.kayleh.top/posts/mysql">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://blog.kayleh.top/posts/mysql","path":"posts/mysql","title":"MYSQL"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>MYSQL | Kayleh's Blog</title>
  




  <script>
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "q44a4p85n0");
</script>




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Kayleh's Blog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">247</span></a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">34</span></a></li><li class="menu-item menu-item-friends"><a href="/friends" rel="section"><i class="fa fa-heartbeat fa-fw"></i>friends</a></li><li class="menu-item menu-item-sitemap"><a href="/rss.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="Searching..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#MYSQL%E7%B4%A2%E5%BC%95"><span class="nav-number">1.</span> <span class="nav-text">MYSQL索引</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%99%AE%E9%80%9A%E7%B4%A2%E5%BC%95"><span class="nav-number">1.1.</span> <span class="nav-text">普通索引</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95"><span class="nav-number">1.1.1.</span> <span class="nav-text">创建索引</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8%E7%BB%93%E6%9E%84-%E6%B7%BB%E5%8A%A0%E7%B4%A2%E5%BC%95"><span class="nav-number">1.1.2.</span> <span class="nav-text">修改表结构(添加索引)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8%E7%9A%84%E6%97%B6%E5%80%99%E7%9B%B4%E6%8E%A5%E6%8C%87%E5%AE%9A"><span class="nav-number">1.1.3.</span> <span class="nav-text">创建表的时候直接指定</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95%E7%9A%84%E8%AF%AD%E6%B3%95"><span class="nav-number">1.1.4.</span> <span class="nav-text">删除索引的语法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%94%AF%E4%B8%80%E7%B4%A2%E5%BC%95"><span class="nav-number">1.2.</span> <span class="nav-text">唯一索引</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95-1"><span class="nav-number">1.2.1.</span> <span class="nav-text">创建索引</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="nav-number">1.2.2.</span> <span class="nav-text">修改表结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8%E7%9A%84%E6%97%B6%E5%80%99%E7%9B%B4%E6%8E%A5%E6%8C%87%E5%AE%9A-1"><span class="nav-number">1.2.3.</span> <span class="nav-text">创建表的时候直接指定</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8ALTER-%E5%91%BD%E4%BB%A4%E6%B7%BB%E5%8A%A0%E5%92%8C%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95"><span class="nav-number">1.2.4.</span> <span class="nav-text">使用ALTER 命令添加和删除索引</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-ALTER-%E5%91%BD%E4%BB%A4%E6%B7%BB%E5%8A%A0%E5%92%8C%E5%88%A0%E9%99%A4%E4%B8%BB%E9%94%AE"><span class="nav-number">1.2.5.</span> <span class="nav-text">使用 ALTER 命令添加和删除主键</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%98%BE%E7%A4%BA%E7%B4%A2%E5%BC%95%E4%BF%A1%E6%81%AF"><span class="nav-number">1.2.6.</span> <span class="nav-text">显示索引信息</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL-%E4%B8%B4%E6%97%B6%E8%A1%A8"><span class="nav-number">2.</span> <span class="nav-text">MySQL 临时表</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B"><span class="nav-number">2.0.0.1.</span> <span class="nav-text">实例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A0%E9%99%A4MySQL-%E4%B8%B4%E6%97%B6%E8%A1%A8"><span class="nav-number">2.1.</span> <span class="nav-text">删除MySQL 临时表</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL-%E5%A4%8D%E5%88%B6%E8%A1%A8"><span class="nav-number">2.2.</span> <span class="nav-text">MySQL 复制表</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B-1"><span class="nav-number">2.2.1.</span> <span class="nav-text">实例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%A6%E4%B8%80%E7%A7%8D%E5%AE%8C%E6%95%B4%E5%A4%8D%E5%88%B6%E8%A1%A8%E7%9A%84%E6%96%B9%E6%B3%95"><span class="nav-number">2.2.2.</span> <span class="nav-text">另一种完整复制表的方法:</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%BB%E8%A6%81%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">3.</span> <span class="nav-text">主要配置文件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6%E6%97%A5%E5%BF%97log-bin"><span class="nav-number">3.0.1.</span> <span class="nav-text">二进制文件日志log-bin</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%94%99%E8%AF%AF%E6%97%A5%E5%BF%97log-error"><span class="nav-number">3.0.2.</span> <span class="nav-text">错误日志log-error</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E6%97%A5%E5%BF%97log"><span class="nav-number">3.0.3.</span> <span class="nav-text">查询日志log</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6"><span class="nav-number">3.0.4.</span> <span class="nav-text">数据文件</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%BA%93"><span class="nav-number">3.0.4.0.1.</span> <span class="nav-text">库</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#frm%E6%96%87%E4%BB%B6"><span class="nav-number">3.0.4.0.2.</span> <span class="nav-text">frm文件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#MYD%E6%96%87%E4%BB%B6"><span class="nav-number">3.0.4.0.3.</span> <span class="nav-text">MYD文件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#MYI%E6%96%87%E4%BB%B6"><span class="nav-number">3.0.4.0.4.</span> <span class="nav-text">MYI文件</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E7%BB%93%E6%9E%84"><span class="nav-number">3.1.</span> <span class="nav-text">逻辑结构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="nav-number">3.1.1.</span> <span class="nav-text">存储引擎</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#MyisAm%E5%92%8CInnoDB%E5%8C%BA%E5%88%AB"><span class="nav-number">3.1.1.1.</span> <span class="nav-text">MyisAm和InnoDB区别</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SQL%E6%89%A7%E8%A1%8C%E5%8A%A0%E8%BD%BD%E9%A1%BA%E5%BA%8F"><span class="nav-number">3.1.2.</span> <span class="nav-text">SQL执行加载顺序</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95"><span class="nav-number">4.</span> <span class="nav-text">索引</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8A%BF"><span class="nav-number">4.0.0.1.</span> <span class="nav-text">索引优势</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8A%A3%E5%8A%BF"><span class="nav-number">4.0.0.2.</span> <span class="nav-text">劣势</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%86%E7%B1%BB"><span class="nav-number">4.0.0.3.</span> <span class="nav-text">索引的分类</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8D%95%E5%80%BC%E7%B4%A2%E5%BC%95"><span class="nav-number">4.0.0.3.1.</span> <span class="nav-text">单值索引</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%94%AF%E4%B8%80%E7%B4%A2%E5%BC%95-1"><span class="nav-number">4.0.0.3.2.</span> <span class="nav-text">唯一索引</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%A4%8D%E5%90%88%E7%B4%A2%E5%BC%95"><span class="nav-number">4.0.0.3.3.</span> <span class="nav-text">复合索引</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95%E7%9A%84%E5%91%BD%E5%90%8D%E8%AF%AD%E5%8F%A5"><span class="nav-number">4.0.1.</span> <span class="nav-text">索引的命名语句</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA"><span class="nav-number">4.0.1.1.</span> <span class="nav-text">创建</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A0%E9%99%A4"><span class="nav-number">4.0.1.2.</span> <span class="nav-text">删除</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B"><span class="nav-number">4.0.1.3.</span> <span class="nav-text">查看</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95%E7%BB%93%E6%9E%84"><span class="nav-number">4.0.2.</span> <span class="nav-text">索引结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%93%AA%E4%BA%9B%E6%83%85%E5%86%B5%E9%9C%80%E8%A6%81%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%EF%BC%9F"><span class="nav-number">4.0.3.</span> <span class="nav-text">哪些情况需要创建索引？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%93%AA%E4%BA%9B%E6%83%85%E5%86%B5%E4%B8%8D%E9%9C%80%E8%A6%81%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%EF%BC%9F"><span class="nav-number">4.0.4.</span> <span class="nav-text">哪些情况不需要创建索引？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%EF%BC%88%E6%9F%A5%E8%AF%A2%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92%EF%BC%89"><span class="nav-number">4.0.5.</span> <span class="nav-text">性能分析（查询执行计划）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Explain"><span class="nav-number">4.0.5.1.</span> <span class="nav-text">Explain</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%EF%BC%9AExplain-SQL%E8%AF%AD%E5%8F%A5"><span class="nav-number">4.0.5.1.1.</span> <span class="nav-text">使用：Explain + SQL语句</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A1%A8%E7%9A%84%E8%AF%BB%E5%8F%96%E9%A1%BA%E5%BA%8F"><span class="nav-number">4.0.5.2.</span> <span class="nav-text">表的读取顺序</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#id%EF%BC%9A"><span class="nav-number">4.0.5.2.1.</span> <span class="nav-text">id：</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E8%AF%BB%E5%8F%96%E6%93%8D%E4%BD%9C%E7%9A%84%E6%93%8D%E4%BD%9C%E7%B1%BB%E5%9E%8B"><span class="nav-number">4.0.5.3.</span> <span class="nav-text">数据读取操作的操作类型</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#select-type%EF%BC%9A"><span class="nav-number">4.0.5.3.1.</span> <span class="nav-text">select_type：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#table%EF%BC%9A"><span class="nav-number">4.0.5.3.2.</span> <span class="nav-text">table：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#type%EF%BC%9A"><span class="nav-number">4.0.5.3.3.</span> <span class="nav-text">type：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#possible-keys-%E5%92%8C-key%EF%BC%9A"><span class="nav-number">4.0.5.3.4.</span> <span class="nav-text">possible_keys 和 key：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#key-len"><span class="nav-number">4.0.5.3.5.</span> <span class="nav-text">key_len:</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#ref"><span class="nav-number">4.0.5.3.6.</span> <span class="nav-text">ref:</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#rows"><span class="nav-number">4.0.5.3.7.</span> <span class="nav-text">rows:</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#extra"><span class="nav-number">4.0.5.3.8.</span> <span class="nav-text">extra:</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%95%E8%A1%A8%E4%BC%98%E5%8C%96"><span class="nav-number">4.0.6.</span> <span class="nav-text">单表优化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%A4%E8%A1%A8%E4%BC%98%E5%8C%96"><span class="nav-number">4.0.7.</span> <span class="nav-text">两表优化</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%89%80%E4%BB%A5%E5%B7%A6%E8%BF%9E%E6%8E%A5%E8%A6%81%E5%8A%A0%E5%8F%B3%E8%A1%A8%E3%80%82%E5%B7%A6%E8%A1%A8%E5%85%A8%E6%9C%89%EF%BC%8C%E5%8A%A0%E4%B8%8D%E5%8A%A0%E7%B4%A2%E5%BC%95%E9%83%BD%E6%98%AF%E5%85%A8%E8%A1%A8%E6%9F%A5%E8%AF%A2%E3%80%82"><span class="nav-number">4.0.7.1.</span> <span class="nav-text">所以左连接要加右表。左表全有，加不加索引都是全表查询。</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%89%E8%A1%A8%E4%BC%98%E5%8C%96"><span class="nav-number">4.0.8.</span> <span class="nav-text">三表优化</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96"><span class="nav-number">4.1.</span> <span class="nav-text">索引优化</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%81%BF%E5%85%8D%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88"><span class="nav-number">4.1.1.</span> <span class="nav-text">避免索引失效</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9C%80%E4%BD%B3%E5%B7%A6%E5%89%8D%E7%BC%80%E5%8E%9F%E5%88%99"><span class="nav-number">4.1.1.1.</span> <span class="nav-text">最佳左前缀原则</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E6%88%AA%E5%8F%96%E5%88%86%E6%9E%90"><span class="nav-number">4.1.2.</span> <span class="nav-text">查询截取分析</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96"><span class="nav-number">4.1.2.1.</span> <span class="nav-text">查询优化</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Order-by%E5%85%B3%E9%94%AE%E5%AD%97%E6%8E%92%E5%BA%8F%E4%BC%98%E5%8C%96"><span class="nav-number">4.1.3.</span> <span class="nav-text">Order by关键字排序优化</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">4.1.3.0.1.</span> <span class="nav-text">总结:</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#group-by%E5%85%B3%E9%94%AE%E5%AD%97%E4%BC%98%E5%8C%96"><span class="nav-number">4.1.4.</span> <span class="nav-text">group by关键字优化</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%85%A2%E6%9F%A5%E8%AF%A2%E6%97%A5%E5%BF%97"><span class="nav-number">4.2.</span> <span class="nav-text">慢查询日志</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7"><span class="nav-number">4.2.0.0.1.</span> <span class="nav-text">日志分析工具</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%B9%E9%87%8F%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE%E8%84%9A%E6%9C%AC"><span class="nav-number">4.3.</span> <span class="nav-text">批量插入数据脚本</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%BE%80emp%E8%A1%A8%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">4.3.0.0.1.</span> <span class="nav-text">创建往emp表插入数据的存储过程</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%BE%80dept%E8%A1%A8%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">4.3.0.0.2.</span> <span class="nav-text">创建往dept表插入数据的存储过程</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Show-Profile"><span class="nav-number">4.4.</span> <span class="nav-text">Show Profile</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E6%9F%A5%E8%AF%A2%E6%97%A5%E5%BF%97"><span class="nav-number">4.5.</span> <span class="nav-text">全局查询日志</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%B0%B8%E8%BF%9C%E4%B8%8D%E8%A6%81%E5%9C%A8%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E5%BC%80%E5%90%AF%E8%BF%99%E4%B8%AA%E5%8A%9F%E8%83%BD-%E4%BB%85%E5%9C%A8%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E4%BD%BF%E7%94%A8"><span class="nav-number">4.5.0.0.1.</span> <span class="nav-text">永远不要在生产环境开启这个功能,仅在测试环境使用.</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E9%94%81"><span class="nav-number">4.6.</span> <span class="nav-text">数据库锁</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%94%81%E7%9A%84%E5%88%86%E7%B1%BB"><span class="nav-number">4.6.1.</span> <span class="nav-text">锁的分类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MYSQL%E9%94%81%E6%9C%BA%E5%88%B6"><span class="nav-number">4.6.2.</span> <span class="nav-text">MYSQL锁机制</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%B8%89%E9%94%81-%E2%86%93"><span class="nav-number">4.6.2.0.1.</span> <span class="nav-text">三锁 ↓</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A1%A8%E9%94%81-%E5%81%8F%E8%AF%BB"><span class="nav-number">4.6.3.</span> <span class="nav-text">表锁(偏读)</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%86%99%E9%94%81"><span class="nav-number">4.6.3.0.1.</span> <span class="nav-text">写锁</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%9C%8B%E7%9C%8B%E5%93%AA%E4%BA%9B%E8%A1%A8%E8%A2%AB%E9%94%81%E4%BA%86"><span class="nav-number">4.6.3.0.2.</span> <span class="nav-text">看看哪些表被锁了</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E5%88%86%E6%9E%90%E8%A1%A8%E9%94%81%E5%AE%9A"><span class="nav-number">4.6.3.0.3.</span> <span class="nav-text">如何分析表锁定</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A1%8C%E9%94%81-%E5%81%8F%E5%86%99"><span class="nav-number">4.6.4.</span> <span class="nav-text">行锁(偏写)</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1-Transaction-%E5%8F%8A%E5%85%B6ACID%E5%B1%9E%E6%80%A7"><span class="nav-number">4.6.4.0.1.</span> <span class="nav-text">事务(Transaction)及其ACID属性</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%B9%B6%E5%8F%91%E5%A4%84%E7%90%86%E4%BA%8B%E5%8A%A1%E5%B8%A6%E6%9D%A5%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">4.6.4.0.2.</span> <span class="nav-text">并发处理事务带来的问题</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="nav-number">4.6.4.0.3.</span> <span class="nav-text">事务隔离级别;</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90"><span class="nav-number">4.6.4.1.</span> <span class="nav-text">案例分析:</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%97%A0%E7%B4%A2%E5%BC%95%E8%A1%8C%E9%94%81%E5%8F%98%E8%A1%A8%E9%94%81"><span class="nav-number">4.6.4.1.1.</span> <span class="nav-text">无索引行锁变表锁;</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%97%B4%E9%9A%99%E9%94%81%E7%9A%84%E5%8D%B1%E5%AE%B3"><span class="nav-number">4.6.4.1.2.</span> <span class="nav-text">间隙锁的危害</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E9%94%81%E5%AE%9A%E4%B8%80%E8%A1%8C"><span class="nav-number">4.6.4.1.3.</span> <span class="nav-text">如何锁定一行</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E5%88%86%E6%9E%90%E8%A1%8C%E9%94%81%E5%AE%9A"><span class="nav-number">4.6.4.1.4.</span> <span class="nav-text">如何分析行锁定</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A1%B5%E9%94%81"><span class="nav-number">4.6.5.</span> <span class="nav-text">页锁</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6"><span class="nav-number">4.7.</span> <span class="nav-text">主从复制</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%8D%E5%88%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86%EF%BC%9A"><span class="nav-number">4.7.0.1.</span> <span class="nav-text">复制的基本原理：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%8D%E5%88%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8E%9F%E5%88%99%EF%BC%9A"><span class="nav-number">4.7.0.2.</span> <span class="nav-text">复制的基本原则：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%8D%E5%88%B6%E7%9A%84%E6%9C%80%E5%A4%A7%E9%97%AE%E9%A2%98%EF%BC%9A"><span class="nav-number">4.7.0.3.</span> <span class="nav-text">复制的最大问题：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%80%E4%B8%BB%E4%B8%80%E4%BB%8E%E5%B8%B8%E8%A7%81%E9%85%8D%E7%BD%AE%EF%BC%9A"><span class="nav-number">4.7.0.4.</span> <span class="nav-text">一主一从常见配置：</span></a></li></ol></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Kayleh"
      src="/images/mygo.jpg">
  <p class="site-author-name" itemprop="name">Kayleh</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">247</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">34</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2theWxlaA==" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;kayleh"><i class="fab fa-github fa-fw"></i>GitHub</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="bWFpbHRvOndlYnNpdGVAa2F5bGVoLnRvcA==" title="E-Mail → mailto:website@kayleh.top"><i class="fa fa-envelope fa-fw"></i>E-Mail</span>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <span class="exturl cc-opacity" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC8="><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://blog.kayleh.top/posts/mysql">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/mygo.jpg">
      <meta itemprop="name" content="Kayleh">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kayleh's Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="MYSQL | Kayleh's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          MYSQL<span class="exturl post-edit-link" data-url="aHR0cHM6Ly9naXRodWIuY29tL2theWxlaC9rYXlsZWguZ2l0aHViLmlvMi9lZGl0L21hc3Rlci9zb3VyY2UvX3Bvc3RzL01ZU1FMLm1k" title="Edit this post"><i class="fa fa-pen-nib"></i></span>
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-08-02 14:54:25" itemprop="dateCreated datePublished" datetime="2020-08-02T14:54:25+08:00">2020-08-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2025-02-04 00:14:08" itemprop="dateModified" datetime="2025-02-04T00:14:08+08:00">2025-02-04</time>
    </span>

  
    <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">Views: </span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1 id="MYSQL索引"><a href="#MYSQL索引" class="headerlink" title="MYSQL索引"></a>MYSQL索引</h1><span id="more"></span>

<blockquote>
<p>MySQL索引的建立对于MySQL的高效运行是很重要的，索引可以大大提高MySQL的检索速度。</p>
<p>打个比方，如果合理的设计且使用索引的MySQL是一辆兰博基尼的话，那么没有设计和使用索引的MySQL就是一个人力三轮车。</p>
<p>拿汉语字典的目录页（索引）打比方，我们可以按拼音、笔画、偏旁部首等排序的目录（索引）快速查找到需要的字。</p>
<p>索引分单列索引和组合索引。单列索引，即一个索引只包含单个列，一个表可以有多个单列索引，但这不是组合索引。组合索引，即一个索引包含多个列。</p>
<p>创建索引时，你需要确保该索引是应用在 SQL 查询语句的条件(一般作为 WHERE 子句的条件)。</p>
<p>实际上，索引也是一张表，该表保存了主键与索引字段，并指向实体表的记录。</p>
<p>上面都在说使用索引的好处，但过多的使用索引将会造成滥用。因此索引也会有它的缺点：虽然索引大大提高了查询速度，同时却会降低更新表的速度，如对表进行INSERT、UPDATE和DELETE。因为更新表时，MySQL不仅要保存数据，还要保存一下索引文件。</p>
<p>建立索引会占用磁盘空间的索引文件。</p>
</blockquote>
<h2 id="普通索引"><a href="#普通索引" class="headerlink" title="普通索引"></a>普通索引</h2><h3 id="创建索引"><a href="#创建索引" class="headerlink" title="创建索引"></a>创建索引</h3><p>这是最基本的索引，它没有任何限制。它有以下几种创建方式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE INDEX indexName ON mytable(username(length)); </span><br></pre></td></tr></table></figure>

<p>如果是CHAR，VARCHAR类型，length可以小于字段实际长度；如果是BLOB和TEXT类型，必须指定 length。</p>
<h3 id="修改表结构-添加索引"><a href="#修改表结构-添加索引" class="headerlink" title="修改表结构(添加索引)"></a>修改表结构(添加索引)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER table tableName ADD INDEX indexName(columnName)</span><br></pre></td></tr></table></figure>

<h3 id="创建表的时候直接指定"><a href="#创建表的时候直接指定" class="headerlink" title="创建表的时候直接指定"></a>创建表的时候直接指定</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE mytable(  </span><br><span class="line"> </span><br><span class="line">ID INT NOT NULL,   </span><br><span class="line"> </span><br><span class="line">username VARCHAR(16) NOT NULL,  </span><br><span class="line"> </span><br><span class="line">INDEX [indexName] (username(length))  </span><br><span class="line"> </span><br><span class="line">);  </span><br></pre></td></tr></table></figure>

<h3 id="删除索引的语法"><a href="#删除索引的语法" class="headerlink" title="删除索引的语法"></a>删除索引的语法</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> INDEX [indexName] <span class="keyword">ON</span> mytable; </span><br></pre></td></tr></table></figure>

<h2 id="唯一索引"><a href="#唯一索引" class="headerlink" title="唯一索引"></a>唯一索引</h2><p>它与前面的普通索引类似，不同的就是：索引列的值必须唯一，但允许有空值。如果是组合索引，则列值的组合必须唯一。它有以下几种创建方式：</p>
<h3 id="创建索引-1"><a href="#创建索引-1" class="headerlink" title="创建索引"></a>创建索引</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE UNIQUE INDEX indexName ON mytable(username(length)) </span><br></pre></td></tr></table></figure>

<h3 id="修改表结构"><a href="#修改表结构" class="headerlink" title="修改表结构"></a>修改表结构</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER table mytable ADD UNIQUE [indexName] (username(length))</span><br></pre></td></tr></table></figure>

<h3 id="创建表的时候直接指定-1"><a href="#创建表的时候直接指定-1" class="headerlink" title="创建表的时候直接指定"></a>创建表的时候直接指定</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE mytable(  </span><br><span class="line"> </span><br><span class="line">ID INT NOT NULL,   </span><br><span class="line"> </span><br><span class="line">username VARCHAR(16) NOT NULL,  </span><br><span class="line">    </span><br><span class="line">UNIQUE [indexName] (username(length))  </span><br><span class="line"> </span><br><span class="line">);  </span><br></pre></td></tr></table></figure>

<h3 id="使用ALTER-命令添加和删除索引"><a href="#使用ALTER-命令添加和删除索引" class="headerlink" title="使用ALTER 命令添加和删除索引"></a>使用ALTER 命令添加和删除索引</h3><p>有四种方式来添加数据表的索引：</p>
<ul>
<li><p><strong>ALTER TABLE tbl_name ADD PRIMARY KEY (column_list):</strong></p>
<p> 该语句添加一个主键，这意味着索引值必须是唯一的，且不能为NULL。</p>
</li>
<li><p><strong>ALTER TABLE tbl_name ADD UNIQUE index_name (column_list):</strong> </p>
<p>这条语句创建索引的值必须是唯一的（除了NULL外，NULL可能会出现多次）。</p>
</li>
<li><p><strong>ALTER TABLE tbl_name ADD INDEX index_name (column_list):</strong> </p>
<p>添加普通索引，索引值可出现多次。</p>
</li>
<li><p><strong>ALTER TABLE tbl_name ADD FULLTEXT index_name (column_list):</strong></p>
<p>该语句指定了索引为 FULLTEXT ，用于全文索引。</p>
</li>
</ul>
<p>以下实例为在表中添加索引。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE testalter_tbl ADD INDEX (c);</span><br></pre></td></tr></table></figure>

<p>你还可以在 ALTER 命令中使用 DROP 子句来删除索引。尝试以下实例删除索引:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE testalter_tbl DROP INDEX c;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="使用-ALTER-命令添加和删除主键"><a href="#使用-ALTER-命令添加和删除主键" class="headerlink" title="使用 ALTER 命令添加和删除主键"></a>使用 ALTER 命令添加和删除主键</h3><p>主键只能作用于一个列上，添加主键索引时，你需要确保该主键默认不为空（NOT NULL）。实例如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE testalter_tbl MODIFY i INT NOT NULL;</span><br><span class="line">mysql&gt; ALTER TABLE testalter_tbl ADD PRIMARY KEY (i);</span><br></pre></td></tr></table></figure>

<p>你也可以使用 ALTER 命令删除主键：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE testalter_tbl DROP PRIMARY KEY;</span><br></pre></td></tr></table></figure>

<p>删除主键时只需指定PRIMARY KEY，但在删除索引时，你必须知道索引名。</p>
<hr>
<h3 id="显示索引信息"><a href="#显示索引信息" class="headerlink" title="显示索引信息"></a>显示索引信息</h3><p>你可以使用 SHOW INDEX 命令来列出表中的相关的索引信息。可以通过添加 \G 来格式化输出信息。</p>
<p>尝试以下实例:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SHOW INDEX FROM table_name; \G</span><br><span class="line">........</span><br></pre></td></tr></table></figure>

<h1 id="MySQL-临时表"><a href="#MySQL-临时表" class="headerlink" title="MySQL 临时表"></a>MySQL 临时表</h1><blockquote>
<p>MySQL 临时表在我们需要保存一些临时数据时是非常有用的。临时表只在当前连接可见，当关闭连接时，Mysql会自动删除表并释放所有空间。临时表在MySQL 3.23版本中添加，如果你的MySQL版本低于 3.23版本就无法使用MySQL的临时表。不过现在一般很少有再使用这么低版本的MySQL数据库服务了。</p>
<p>MySQL临时表只在当前连接可见，如果你使用PHP脚本来创建MySQL临时表，那每当PHP脚本执行完成后，该临时表也会自动销毁。</p>
<p>如果你使用了其他MySQL客户端程序连接MySQL数据库服务器来创建临时表，那么只有在关闭客户端程序时才会销毁临时表，当然你也可以手动销毁。</p>
</blockquote>
<h4 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h4><p>以下展示了使用MySQL 临时表的简单实例，以下的SQL代码可以适用于PHP脚本的mysql_query()函数。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; CREATE TEMPORARY TABLE SalesSummary (</span><br><span class="line">    -&gt; product_name VARCHAR(50) NOT NULL</span><br><span class="line">    -&gt; , total_sales DECIMAL(12,2) NOT NULL DEFAULT 0.00</span><br><span class="line">    -&gt; , avg_unit_price DECIMAL(7,2) NOT NULL DEFAULT 0.00</span><br><span class="line">    -&gt; , total_units_sold INT UNSIGNED NOT NULL DEFAULT 0</span><br><span class="line">);</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; INSERT INTO SalesSummary</span><br><span class="line">    -&gt; (product_name, total_sales, avg_unit_price, total_units_sold)</span><br><span class="line">    -&gt; VALUES</span><br><span class="line">    -&gt; (&#x27;cucumber&#x27;, 100.25, 90, 2);</span><br><span class="line"></span><br><span class="line">mysql&gt; SELECT * FROM SalesSummary;</span><br><span class="line">+--------------+-------------+----------------+------------------+</span><br><span class="line">| product_name | total_sales | avg_unit_price | total_units_sold |</span><br><span class="line">+--------------+-------------+----------------+------------------+</span><br><span class="line">| cucumber     |      100.25 |          90.00 |                2 |</span><br><span class="line">+--------------+-------------+----------------+------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>当你使用 <strong>SHOW TABLES</strong>命令显示数据表列表时，你将无法看到 SalesSummary表。</p>
<p>如果你退出当前MySQL会话，再使用 <strong>SELECT</strong>命令来读取原先创建的临时表数据，那你会发现数据库中没有该表的存在，因为在你退出时该临时表已经被销毁了。</p>
<h2 id="删除MySQL-临时表"><a href="#删除MySQL-临时表" class="headerlink" title="删除MySQL 临时表"></a>删除MySQL 临时表</h2><p>默认情况下，当你断开与数据库的连接后，临时表就会自动被销毁。当然你也可以在当前MySQL会话使用 <strong>DROP TABLE</strong> 命令来手动删除临时表。</p>
<p>以下是手动删除临时表的实例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; CREATE TEMPORARY TABLE SalesSummary (</span><br><span class="line">    -&gt; product_name VARCHAR(50) NOT NULL</span><br><span class="line">    -&gt; , total_sales DECIMAL(12,2) NOT NULL DEFAULT 0.00</span><br><span class="line">    -&gt; , avg_unit_price DECIMAL(7,2) NOT NULL DEFAULT 0.00</span><br><span class="line">    -&gt; , total_units_sold INT UNSIGNED NOT NULL DEFAULT 0</span><br><span class="line">);</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; INSERT INTO SalesSummary</span><br><span class="line">    -&gt; (product_name, total_sales, avg_unit_price, total_units_sold)</span><br><span class="line">    -&gt; VALUES</span><br><span class="line">    -&gt; (&#x27;cucumber&#x27;, 100.25, 90, 2);</span><br><span class="line"></span><br><span class="line">mysql&gt; SELECT * FROM SalesSummary;</span><br><span class="line">+--------------+-------------+----------------+------------------+</span><br><span class="line">| product_name | total_sales | avg_unit_price | total_units_sold |</span><br><span class="line">+--------------+-------------+----------------+------------------+</span><br><span class="line">| cucumber     |      100.25 |          90.00 |                2 |</span><br><span class="line">+--------------+-------------+----------------+------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line">mysql&gt; DROP TABLE SalesSummary;</span><br><span class="line">mysql&gt;  SELECT * FROM SalesSummary;</span><br><span class="line">ERROR 1146: Table &#x27;RUNOOB.SalesSummary&#x27; doesn&#x27;t exist</span><br></pre></td></tr></table></figure>

<h2 id="MySQL-复制表"><a href="#MySQL-复制表" class="headerlink" title="MySQL 复制表"></a>MySQL 复制表</h2><p>如果我们需要完全的复制MySQL的数据表，包括表的结构，索引，默认值等。 如果仅仅使用<strong>CREATE TABLE … SELECT</strong> 命令，是无法实现的。</p>
<p>本章节将为大家介绍如何完整的复制MySQL数据表，步骤如下：</p>
<ul>
<li>使用 <strong>SHOW CREATE TABLE</strong> 命令获取创建数据表(<strong>CREATE TABLE</strong>) 语句，该语句包含了原数据表的结构，索引等。</li>
<li></li>
<li>复制以下命令显示的SQL语句，修改数据表名，并执行SQL语句，通过以上命令 将完全的复制数据表结构。</li>
<li>如果你想复制表的内容，你就可以使用 <strong>INSERT INTO … SELECT</strong> 语句来实现。</li>
</ul>
<h3 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h3><p>尝试以下实例来复制表 runoob_tbl 。</p>
<p><strong>步骤一：</strong></p>
<p>获取数据表的完整结构。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SHOW CREATE TABLE runoob_tbl \G;</span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">       Table: runoob_tbl</span><br><span class="line">Create Table: CREATE TABLE `runoob_tbl` (</span><br><span class="line">  `runoob_id` int(11) NOT NULL auto_increment,</span><br><span class="line">  `runoob_title` varchar(100) NOT NULL default &#x27;&#x27;,</span><br><span class="line">  `runoob_author` varchar(40) NOT NULL default &#x27;&#x27;,</span><br><span class="line">  `submission_date` date default NULL,</span><br><span class="line">  PRIMARY KEY  (`runoob_id`),</span><br><span class="line">  UNIQUE KEY `AUTHOR_INDEX` (`runoob_author`)</span><br><span class="line">) ENGINE=InnoDB </span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">ERROR:</span><br><span class="line">No query specified</span><br></pre></td></tr></table></figure>

<p><strong>步骤二：</strong></p>
<p>修改SQL语句的数据表名，并执行SQL语句。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; CREATE TABLE `clone_tbl` (</span><br><span class="line">  -&gt; `runoob_id` int(11) NOT NULL auto_increment,</span><br><span class="line">  -&gt; `runoob_title` varchar(100) NOT NULL default &#x27;&#x27;,</span><br><span class="line">  -&gt; `runoob_author` varchar(40) NOT NULL default &#x27;&#x27;,</span><br><span class="line">  -&gt; `submission_date` date default NULL,</span><br><span class="line">  -&gt; PRIMARY KEY  (`runoob_id`),</span><br><span class="line">  -&gt; UNIQUE KEY `AUTHOR_INDEX` (`runoob_author`)</span><br><span class="line">-&gt; ) ENGINE=InnoDB;</span><br><span class="line">Query OK, 0 rows affected (1.80 sec)</span><br></pre></td></tr></table></figure>

<p><strong>步骤三：</strong></p>
<p>执行完第二步骤后，你将在数据库中创建新的克隆表 clone_tbl。 如果你想拷贝数据表的数据你可以使用 <strong>INSERT INTO… SELECT</strong> 语句来实现。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; INSERT INTO clone_tbl (runoob_id,</span><br><span class="line">    -&gt;                        runoob_title,</span><br><span class="line">    -&gt;                        runoob_author,</span><br><span class="line">    -&gt;                        submission_date)</span><br><span class="line">    -&gt; SELECT runoob_id,runoob_title,</span><br><span class="line">    -&gt;        runoob_author,submission_date</span><br><span class="line">    -&gt; FROM runoob_tbl;</span><br><span class="line">Query OK, 3 rows affected (0.07 sec)</span><br><span class="line">Records: 3  Duplicates: 0  Warnings: 0</span><br></pre></td></tr></table></figure>

<p>执行以上步骤后，你将完整的复制表，包括表结构及表数据。</p>
<h3 id="另一种完整复制表的方法"><a href="#另一种完整复制表的方法" class="headerlink" title="另一种完整复制表的方法:"></a>另一种完整复制表的方法:</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE targetTable LIKE sourceTable;</span><br><span class="line">INSERT INTO targetTable SELECT * FROM sourceTable;</span><br></pre></td></tr></table></figure>

<p>其他:</p>
<p>可以拷贝一个表中其中的一些字段:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE newadmin AS</span><br><span class="line">(</span><br><span class="line">    SELECT username, password FROM admin</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>可以将新建的表的字段改名:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE newadmin AS</span><br><span class="line">(  </span><br><span class="line">    SELECT id, username AS uname, password AS pass FROM admin</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>可以拷贝一部分数据:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE newadmin AS</span><br><span class="line">(</span><br><span class="line">    SELECT * FROM admin WHERE LEFT(username,1) = &#x27;s&#x27;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>可以在创建表的同时定义表中的字段信息:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE newadmin</span><br><span class="line">(</span><br><span class="line">    id INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY</span><br><span class="line">)</span><br><span class="line">AS</span><br><span class="line">(</span><br><span class="line">    SELECT * FROM admin</span><br><span class="line">)  </span><br></pre></td></tr></table></figure>

<p><strong>区分下mysql复制表的两种方式。</strong></p>
<p><strong>第一、只复制表结构到新表</strong></p>
<p>create table 新表 select * from 旧表 where 1&#x3D;2</p>
<p>或者</p>
<p>create table 新表 like 旧表 </p>
<p><strong>第二、复制表结构及数据到新表</strong></p>
<p>create table新表 select * from 旧表 </p>
<h1 id="主要配置文件"><a href="#主要配置文件" class="headerlink" title="主要配置文件"></a>主要配置文件</h1><h3 id="二进制文件日志log-bin"><a href="#二进制文件日志log-bin" class="headerlink" title="二进制文件日志log-bin"></a>二进制文件日志log-bin</h3><p>主从复制</p>
<h3 id="错误日志log-error"><a href="#错误日志log-error" class="headerlink" title="错误日志log-error"></a>错误日志log-error</h3><p>默认是关闭的,记录严重的警告和错误信息,每次启动和关闭的详细信息等</p>
<h3 id="查询日志log"><a href="#查询日志log" class="headerlink" title="查询日志log"></a>查询日志log</h3><p>默认关闭,记录查询的sql语句,如果开启会减低mysql的整体性能,因为记录日志也是需要消耗系统资源的</p>
<h3 id="数据文件"><a href="#数据文件" class="headerlink" title="数据文件"></a>数据文件</h3><h5 id="库"><a href="#库" class="headerlink" title="库"></a>库</h5><p>默认路径: &#x2F;var&#x2F;lib&#x2F;mysql</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/3.png" alt="1595839986393"></p>
<h5 id="frm文件"><a href="#frm文件" class="headerlink" title="frm文件"></a>frm文件</h5><p>存放表结构</p>
<h5 id="MYD文件"><a href="#MYD文件" class="headerlink" title="MYD文件"></a>MYD文件</h5><p>存放的是数据,DATA</p>
<h5 id="MYI文件"><a href="#MYI文件" class="headerlink" title="MYI文件"></a>MYI文件</h5><p>存放的是查找数据的索引,INDEX</p>
<h2 id="逻辑结构"><a href="#逻辑结构" class="headerlink" title="逻辑结构"></a>逻辑结构</h2><p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/85282.png" alt="1595842885282"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595843892063.png" alt="1595843892063"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595843971185.png" alt="1595843971185"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595844045065.png" alt="1595844045065"></p>
<h3 id="存储引擎"><a href="#存储引擎" class="headerlink" title="存储引擎"></a>存储引擎</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show enigines</span><br></pre></td></tr></table></figure>

<p>查看mysql当前默认的存储引擎</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show variable like &#x27;%storage_engine%&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="MyisAm和InnoDB区别"><a href="#MyisAm和InnoDB区别" class="headerlink" title="MyisAm和InnoDB区别"></a>MyisAm和InnoDB区别</h4><p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/384514.png" alt="1595844384514"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/49986.png" alt="1595844849986"></p>
<h3 id="SQL执行加载顺序"><a href="#SQL执行加载顺序" class="headerlink" title="SQL执行加载顺序"></a>SQL执行加载顺序</h3><p>手写</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595988597583.png" alt="1595988597583"></p>
<p>机读</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595988626819.png" alt="1595988626819"></p>
<h1 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h1><blockquote>
<p>MYSQL官方对索引的定义：索引(Index)是帮助MYSQL高效获取数据的数据结构.可以得到索引的本质:索引就是数据结构.</p>
<p>“排好序的快速查找数据结构”  对排序和查找都有影响</p>
<ul>
<li><p>在数据之外,数据库系统还维护着满足特定查找算法的数据结构,这些数据结构以某种方式引用(指向)数据.</p>
<p>这样可以在这些数据结构上实现高级查找算法.这种数据结构,就是索引.下图就是一种可能的索引方式示例:</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595905536134.png" alt="1595905536134"></p>
</li>
</ul>
<p>索引的目的在于提高查找效率,可以类比字典;</p>
<p>一般来说索引本身也很大,不可能全部存储在内存中,因此索引往往以索引文件的形式存储的磁盘上</p>
<p>我们平常所说的索引,如果没有特别指明,都是指b+树(多路搜索树,并不一定是二叉的)结构组织的索引,其中聚集索引,次要索引,覆盖索引,复合索引,前缀索引,唯一索引默认都是使用B+树索引,统称索引.当然,除了B+树这种类型的索引之外,还有哈希索引(hash index)等</p>
</blockquote>
<h4 id="索引优势"><a href="#索引优势" class="headerlink" title="索引优势"></a>索引优势</h4><p>类似大学图书馆建书目索引,提高数据检索的效率,降低数据库的IO成本,通过索引对数据进行排序,降低数据排序的成本,降低了CPU的消耗. </p>
<h4 id="劣势"><a href="#劣势" class="headerlink" title="劣势"></a>劣势</h4><p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595911864015.png" alt="1595911864015"></p>
<h4 id="索引的分类"><a href="#索引的分类" class="headerlink" title="索引的分类"></a>索引的分类</h4><h5 id="单值索引"><a href="#单值索引" class="headerlink" title="单值索引"></a>单值索引</h5><p>即一个索引只包含单个列，一个表可以有多个单列索引</p>
<h5 id="唯一索引-1"><a href="#唯一索引-1" class="headerlink" title="唯一索引"></a>唯一索引</h5><p>索引列的值必须唯一，但允许有空值</p>
<h5 id="复合索引"><a href="#复合索引" class="headerlink" title="复合索引"></a>复合索引</h5><p>即一个索引包含多个列</p>
<h3 id="索引的命名语句"><a href="#索引的命名语句" class="headerlink" title="索引的命名语句"></a>索引的命名语句</h3><h4 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h4><blockquote>
<p>CREATE [UNIQUE] INDEX indexName ON mytable(columnname(length));</p>
<p>ALTER mytable ADD [UNIQUE] INDEX [indexName] ON (columnname(name));</p>
</blockquote>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595920057502.png" alt="1595920057502"></p>
<h4 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h4><blockquote>
<p>DROP INDEX [indexName] ON mytable;</p>
</blockquote>
<h4 id="查看"><a href="#查看" class="headerlink" title="查看"></a>查看</h4><blockquote>
<p>SHOW INDEX FROM table_name\G</p>
</blockquote>
<p>使用ALTER命令</p>
<h3 id="索引结构"><a href="#索引结构" class="headerlink" title="索引结构"></a>索引结构</h3><p>BTree索引</p>
<p>b+树</p>
<p>Hash索引</p>
<p>full-text全文索引</p>
<p>R-Tree索引</p>
<h3 id="哪些情况需要创建索引？"><a href="#哪些情况需要创建索引？" class="headerlink" title="哪些情况需要创建索引？"></a>哪些情况需要创建索引？</h3><ol>
<li>主键自动创建索引</li>
<li>频繁作为查询条件的字段应该创建索引</li>
<li>查询中与其他表关联的字段，外键关系建立索引</li>
<li>频繁更新的字段不适合创建索引，因为每次更新不单单是更新了记录还会更新索引</li>
<li>where条件里用不到的字段不创建索引</li>
<li>单键&#x2F;组合索引的选择问题（在高并发下倾向创建组合索引）</li>
<li>查询中排序的字段，排序字段若通过索引去访问将大大提高排序速度</li>
<li>查询中统计或者分组的字段</li>
</ol>
<h3 id="哪些情况不需要创建索引？"><a href="#哪些情况不需要创建索引？" class="headerlink" title="哪些情况不需要创建索引？"></a>哪些情况不需要创建索引？</h3><ol>
<li><p>表记录太少</p>
</li>
<li><p>经常增删改的表</p>
<blockquote>
<p>提高了查询速度，同时会降低更新表的速度，如对表进行INSERT、UPDATE和DELETE。</p>
<p>因为在更新表时，MYSQL不仅要保存数据，还要保存一些索引文件。</p>
</blockquote>
</li>
<li><p>数据重复且分布均匀的表字段，因此应该只为最经常查询和最经常排序的数据建立索引。</p>
<p>如果某个数据列包含许多重复内容，为它建立索引就没有太大的实际效果。</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595923227254.png" alt="1595923227254"></p>
</li>
</ol>
<h3 id="性能分析（查询执行计划）"><a href="#性能分析（查询执行计划）" class="headerlink" title="性能分析（查询执行计划）"></a>性能分析（查询执行计划）</h3><p>MYSQL QUERY Optimizer</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595923535216.png" alt="1595923535216"></p>
<p>MYSQL的常见瓶颈</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595923570837.png" alt="1595923570837"></p>
<h4 id="Explain"><a href="#Explain" class="headerlink" title="Explain"></a>Explain</h4><p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595923735876.png" alt="1595923735876"></p>
<p>能干吗</p>
<ul>
<li>表的读取顺序</li>
<li>数据读取操作的操作类型</li>
<li>哪些索引可以使用</li>
<li>那些索引被实际使用</li>
<li>表之间的引用</li>
<li>每张表有多少行被优化器查询</li>
</ul>
<h5 id="使用：Explain-SQL语句"><a href="#使用：Explain-SQL语句" class="headerlink" title="使用：Explain + SQL语句"></a>使用：Explain + SQL语句</h5><p>执行计划包含的信息</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595927315197.png" alt="1595927315197"></p>
<h4 id="表的读取顺序"><a href="#表的读取顺序" class="headerlink" title="表的读取顺序"></a>表的读取顺序</h4><h5 id="id："><a href="#id：" class="headerlink" title="id："></a>id：</h5><blockquote>
<p>select查询的序列号,包含一组数字,表示查询中执行select子句或操作表的顺序</p>
<p>三种情况: </p>
<ul>
<li><p>id相同,执行顺序由上至下</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595927536666.png" alt=" "></p>
</li>
<li><p>id不同,如果是子查询,id的序号会递增,id值越大优先级会越高,越先被执行.</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595928872305.png" alt="1595928872305"></p>
</li>
<li><p>id相同不同,同时存在</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595929240606.png" alt="1595929240606"></p>
<p>derive的2指的是id为2的t3.</p>
</li>
</ul>
</blockquote>
<h4 id="数据读取操作的操作类型"><a href="#数据读取操作的操作类型" class="headerlink" title="数据读取操作的操作类型"></a>数据读取操作的操作类型</h4><h5 id="select-type："><a href="#select-type：" class="headerlink" title="select_type："></a>select_type：</h5><p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595987567416.png" alt="1595987567416"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1595987675026.png" alt="1595987675026"></p>
<h5 id="table："><a href="#table：" class="headerlink" title="table："></a>table：</h5><p>显示这一行数据是关于哪张表的</p>
<h5 id="type："><a href="#type：" class="headerlink" title="type："></a>type：</h5><p>访问类型</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596002301273.png" alt="1596002301273"></p>
<p>显示查询使用了何种类型，</p>
<p>从最好到最差依次是：</p>
<p>system &gt; const &gt; eq_ref &gt; ref &gt; range &gt; index &gt;ALL</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596002552181.png" alt="1596002552181"></p>
<ul>
<li><p>system</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596002626747.png" alt="1596002626747"></p>
</li>
<li><p>const</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596002709087.png" alt="1596002709087"></p>
</li>
<li><p>eq_ref</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596002859369.png" alt="1596002859369"></p>
</li>
<li><p>ref</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596003234330.png" alt="1596003234330"></p>
</li>
<li><p>range</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596006294816.png" alt="1596006294816"></p>
</li>
<li><p>index</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596006410428.png" alt="1596006410428"></p>
</li>
<li><p>ALL</p>
<p>全表扫描</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596006425805.png" alt="1596006425805"></p>
</li>
</ul>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596006455254.png" alt="1596006455254"></p>
<h5 id="possible-keys-和-key："><a href="#possible-keys-和-key：" class="headerlink" title="possible_keys 和 key："></a>possible_keys 和 key：</h5><p>possible_keys：</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596006649311.png" alt="1596006649311"></p>
<p>key：</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596006751196.png" alt="1596006751196"></p>
<h5 id="key-len"><a href="#key-len" class="headerlink" title="key_len:"></a>key_len:</h5><p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596007145091.png" alt="1596007145091"></p>
<p>4(char长度)*3(UTF-8）+1（null）&#x3D;13 </p>
<h5 id="ref"><a href="#ref" class="headerlink" title="ref:"></a>ref:</h5><p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596007454015.png" alt="1596007454015"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596008615453.png" alt="1596008615453"></p>
<h5 id="rows"><a href="#rows" class="headerlink" title="rows:"></a>rows:</h5><p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596008758503.png" alt="1596008758503"></p>
<h5 id="extra"><a href="#extra" class="headerlink" title="extra:"></a>extra:</h5><p>包含不适合在其他列中显示但十分重要的额外信息</p>
<blockquote>
<p><strong>Using filesort</strong></p>
<p>说明mysql会对数据使用一个外部的索引排序,而不是按照表内的索引顺序进行读取,MYSQL中无法利用索引完成的排序操作被称为”文件排序”</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596010221763.png" alt="1596010221763"></p>
<p><strong>Using temporary</strong></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596010368374.png" alt="1596010368374"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596010573507.png" alt="1596010573507"></p>
<p><strong>Using index</strong></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596011670611.png" alt="1596011670611"></p>
<p>覆盖索引,在possible_keys没有出现但在key出现</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596011879046.png" alt="1596011879046"></p>
<p>覆盖索引:<img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596011985825.png" alt="1596011985825"></p>
<p><strong>Using where</strong></p>
<p>使用了where过滤</p>
<p><strong>using join buffer</strong></p>
<p>使用了连接缓存</p>
<p><strong>impossiable where</strong></p>
<p>where子句的值总是false,不能用来获取任何元组</p>
<p><strong>select tables optimized away</strong></p>
<p>在没有GROUPBY子句的情况下,基于索引优化MIN&#x2F;MAX操作或者对于MyISAM存储引擎优化COUNT(*)操作不必等到执行阶段再进行计算,查询执行计划生成的阶段即完成优化.</p>
<p><strong>distinct</strong></p>
<p>优化distinct操作，在找到第一匹配的元组后即停止找同样值的动作。</p>
</blockquote>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596012711619.png" alt="1596012711619"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596012728741.png" alt="1596012728741"></p>
<h3 id="单表优化"><a href="#单表优化" class="headerlink" title="单表优化"></a>单表优化</h3><p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596025975416.png" alt="1596025975416"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596025918356.png" alt="1596025918356"></p>
<p>范围使索引失效</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596026094589.png" alt="1596026094589"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596026161365.png" alt="1596026161365"></p>
<h3 id="两表优化"><a href="#两表优化" class="headerlink" title="两表优化"></a>两表优化</h3><p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596034217829.png" alt="1596034217829"></p>
<p>先尝试只添加右表的索引</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596034306983.png" alt="1596034306983"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596034355686.png" alt="1596034355686"></p>
<p>左表</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596034657083.png" alt="1596034657083"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596034707674.png" alt="1596034707674"></p>
<h4 id="所以左连接要加右表。左表全有，加不加索引都是全表查询。"><a href="#所以左连接要加右表。左表全有，加不加索引都是全表查询。" class="headerlink" title="所以左连接要加右表。左表全有，加不加索引都是全表查询。"></a>所以左连接要加右表。左表全有，加不加索引都是全表查询。</h4><h3 id="三表优化"><a href="#三表优化" class="headerlink" title="三表优化"></a>三表优化</h3><p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596035555366.png" alt="1596035555366"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596035651547.png" alt="1596035651547"></p>
<p> <img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596035870103.png" alt="1596035870103"></p>
<h2 id="索引优化"><a href="#索引优化" class="headerlink" title="索引优化"></a>索引优化</h2><h3 id="避免索引失效"><a href="#避免索引失效" class="headerlink" title="避免索引失效"></a>避免索引失效</h3><p>建表</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596090287752.png" alt="1596090287752"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596090383772.png" alt="1596090383772"></p>
<ol>
<li><p>全值匹配</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596090596937.png" alt="1596090596937"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596090698031.png" alt="1596090698031"></p>
<p>第一层索引没用上，梯子断裂，<strong>最佳左前缀原则</strong></p>
</li>
<li><h4 id="最佳左前缀原则"><a href="#最佳左前缀原则" class="headerlink" title="最佳左前缀原则"></a><strong>最佳左前缀原则</strong></h4><blockquote>
<p>如果索引了多列，要遵守最左前缀法则。指的是查询从索引的最左前列开始并且不跳过索引中的列。</p>
</blockquote>
</li>
<li><p>不在索引列上做任何操作<img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596091591987.png" alt="1596091591987"></p>
</li>
<li><p>存储引擎不能使用索引中范围条件右边的列</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596091809527.png" alt="1596091809527"></p>
<p>范围后面的索引失效</p>
</li>
<li><p>尽量使用覆盖索引</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596092067130.png" alt="1596092067130"></p>
</li>
<li><p>使用不等于（!&#x3D;或者&lt;&gt;）的时候无法使用索引会导致全表扫描</p>
</li>
<li><p>is not,is not null无法使用索引</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596092443607.png" alt="1596092443607"></p>
</li>
<li><p>like以通配符开头使索引失效会变成全表扫描</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596092593809.png" alt="1596092593809"></p>
<p>要使用两边都带有通配符 ‘ %XX% ‘ 的解决方法: </p>
<p>创建覆盖索引;</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596093309432.png" alt="1596093309432"></p>
</li>
<li><p>字符串不加单引号索引失效</p>
</li>
<li><p>少用or,用它来连接时索引失效</p>
</li>
</ol>
<p>other:</p>
<p>范围后索引断开,使用范围的字段也部分使用了索引.</p>
<p>用于字段排序的索引一定要按照建立索引的字段顺序.否则会产生filesort.</p>
<p>排序也会使用索引并且不会断开,但不显示在ref字段上.</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596096019383.png" alt="1596096019383"></p>
<p>分组之前必排序,会有临时表产生</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596096420658.png" alt="1596096420658"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596098552860.png" alt="1596098552860"></p>
<h3 id="查询截取分析"><a href="#查询截取分析" class="headerlink" title="查询截取分析"></a>查询截取分析</h3><h4 id="查询优化"><a href="#查询优化" class="headerlink" title="查询优化"></a>查询优化</h4><ol>
<li><p>小表驱动大表</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596113933906.png" alt="1596113933906"></p>
<p>“select 1 from”的1是什么都行,是个常量就行</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596114222051.png" alt="1596114222051"></p>
<p>in 和 exists</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596114728723.png" alt="1596114728723"></p>
</li>
</ol>
<h3 id="Order-by关键字排序优化"><a href="#Order-by关键字排序优化" class="headerlink" title="Order by关键字排序优化"></a>Order by关键字排序优化</h3><ol>
<li><p><strong>order by子句，尽量使用index方式排序，避免使用filesort方式排序；</strong></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596180644843.png" alt="1596180644843"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596180875682.png" alt="1596180875682"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596180941151.png" alt="1596180941151"></p>
<p>默认是升序。要不就全部升序,要不就全部降序</p>
</li>
<li><p><strong>尽可能在索引树上完成排序操作，遵照索引建的最佳最前缀</strong></p>
</li>
<li><p><strong>如果不在索引列上，filesort有两种算法:</strong></p>
<p><strong>mysql就要启动双路排序和单路排序；</strong></p>
<blockquote>
<p>双路排序：MYSQL4.1之前是使用双路排序，字面意思就是两次扫描磁盘，最终得到数据，读取行指针和orderby列，对他们进行排序，然后扫描已经排序好的列表，按照列表中的值重新从列表中读取对应的数据输出。</p>
<p>从磁盘取排序字段，在buffer进行排序，再从磁盘取其他字段。</p>
<p>取一批数据，要从磁盘进行了两次扫描，众所周知，I\O是很耗时的，所以在mysql4.1之后，出现了第二种改进的算法，就是单路排序。</p>
<p>单路排序：从磁盘读取查询需要的所有列，按照order by列在buffer对它们进行排序，然后扫描排序后的列表进行输出，它的效率更快一些，避免了第二次读取数据。并且把随机IO变成了顺序IO，但是它会使用更多的空间。因为它把每一行都保存在内存了。</p>
<p>单路是后出的，总体而言好过双路。</p>
<p>单路也有问题：<img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596184232403.png" alt="1596184232403"></p>
</blockquote>
</li>
<li><p><strong>优化策略</strong></p>
<blockquote>
<p>增大sort_buffer_size参数的设置</p>
<p>增大max_length_for_sort_data参数的设置</p>
</blockquote>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596184507560.png" alt="1596184507560"></p>
</li>
</ol>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596184598926.png" alt="1596184598926"></p>
<h5 id="总结"><a href="#总结" class="headerlink" title="总结:"></a>总结:</h5><p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596184599055.png" alt="1596184599055"></p>
<h3 id="group-by关键字优化"><a href="#group-by关键字优化" class="headerlink" title="group by关键字优化"></a>group by关键字优化</h3><p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596184960579.png" alt="1596184960579"></p>
<h2 id="慢查询日志"><a href="#慢查询日志" class="headerlink" title="慢查询日志"></a>慢查询日志</h2><p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596185094308.png" alt="1596185094308"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596188504073.png" alt="1596188504073"></p>
<p>查看是否开启</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW VARIABLES LIKE &#x27;%slow_query_log%&#x27;;</span><br></pre></td></tr></table></figure>

<p>默认是关闭的</p>
<p>开启</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set global slow_query_log=1;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596188752818.png" alt="1596188752818"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596189293802.png" alt="1596189293802"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596189329303.png" alt="1596189329303"></p>
<p>开启了慢查询日志后,什么样的SQL才会记录到慢查询日志里面呢?</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596189519955.png" alt="1596189519955"></p>
<p>设置慢的阈值时间:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">set global long_query_time=3;</span><br><span class="line">##需要重新连接或新开一个会话才能看到修改值.</span><br><span class="line">SHOW VARIABLES LIKE &#x27;long_query_time%&#x27;;</span><br><span class="line"></span><br><span class="line">##或者使用</span><br><span class="line">SHOW global VARIABLES LIKE &#x27;long_query_time&#x27;;</span><br></pre></td></tr></table></figure>

<p>模拟</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select sleep(4);</span><br></pre></td></tr></table></figure>

<p>查看日志</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /var/lib/mysql/***.log</span><br></pre></td></tr></table></figure>

<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596190235561.png" alt="1596190235561"></p>
<p>查询当前系统中有多少条慢查询记录</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596196732744.png" alt="1596196732744"></p>
<p>配置文件</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596196765703.png" alt="1596196765703"></p>
<h5 id="日志分析工具"><a href="#日志分析工具" class="headerlink" title="日志分析工具"></a>日志分析工具</h5><p>在生产环境中,如果要手工分析日志,查找、分析SQL,显然是个体力活,MYSQL提供了日志分析工具mysqldumpslow.</p>
<p>使用帮助</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldumpslow --help</span><br></pre></td></tr></table></figure>

<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596197041821.png" alt="1596197041821"></p>
<p>常用参考:</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596197129161.png" alt="1596197129161"></p>
<h2 id="批量插入数据脚本"><a href="#批量插入数据脚本" class="headerlink" title="批量插入数据脚本"></a>批量插入数据脚本</h2><p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596197341176.png" alt="1596197341176"></p>
<ol>
<li><p>建数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">create database bigData;</span><br><span class="line">use bigData;</span><br></pre></td></tr></table></figure>
</li>
<li><p>建表dept</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE TABLE</span> dept(</span><br><span class="line">	id <span class="type">INT</span> UNSIGNED <span class="keyword">PRIMARY KEY</span> AUTO_INCREMENT,</span><br><span class="line">    ##部门编号</span><br><span class="line">    deptno MEDIUMINT UNSIGNED <span class="keyword">NOT NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>,</span><br><span class="line">    ##部门名称</span><br><span class="line">    dname <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT NULL</span> <span class="keyword">DEFAULT</span> &quot;&quot;,</span><br><span class="line">    ##楼层</span><br><span class="line">    loc <span class="type">VARCHAR</span>(<span class="number">13</span>) <span class="keyword">NOT NULL</span> <span class="keyword">DEFAULT</span> &quot;&quot;</span><br><span class="line">)ENGINE <span class="operator">=</span> INNODB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>GBK;</span><br></pre></td></tr></table></figure>

<p>建表emp</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596197755173.png" alt="1596197755173"></p>
</li>
<li><p>设置参数log_bin_trust_function_creators</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596197943115.png" alt="1596197943115"></p>
</li>
<li><p>随机产生部门字符串</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596203524363.png" alt="1596203524363"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596203855006.png" alt="1596203855006"></p>
</li>
<li><p>创建存储过程</p>
<h5 id="创建往emp表插入数据的存储过程"><a href="#创建往emp表插入数据的存储过程" class="headerlink" title="创建往emp表插入数据的存储过程"></a>创建往emp表插入数据的存储过程</h5><p><strong>function:有返回值</strong></p>
<p><strong>procedure:无返回值</strong></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596204083288.png" alt="1596204083288"></p>
<h5 id="创建往dept表插入数据的存储过程"><a href="#创建往dept表插入数据的存储过程" class="headerlink" title="创建往dept表插入数据的存储过程"></a>创建往dept表插入数据的存储过程</h5><p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596204389262.png" alt="1596204389262"></p>
</li>
<li><p>调用存储过程</p>
<p>dept</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596204532873.png" alt="1596204532873"></p>
<p>emp</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596205863651.png" alt="1596205863651"></p>
</li>
</ol>
<h2 id="Show-Profile"><a href="#Show-Profile" class="headerlink" title="Show Profile"></a>Show Profile</h2><blockquote>
<p>是mysql提供可以用来分析当前会话中语句执行的资源消耗情况.可以用于SQl的调优的测量.</p>
</blockquote>
<p>默认情况下,参数处于关闭状态,并保存最近15次的运行结果.</p>
<p>看看当前的mysql版本是否支持</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Show variables like &#x27;profiling&#x27;;  </span><br><span class="line">或者Show variables like &#x27;profiling%&#x27;;</span><br><span class="line">##默认是关闭的,使用前需要开启</span><br></pre></td></tr></table></figure>

<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596277672469.png" alt="1596277672469"></p>
<p>开启功能</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596277717456.png" alt="1596277717456"></p>
<p>运行SQL</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * from emp group by id%10 limit 150000;</span><br><span class="line">select * from emp group by id%20 order by 5;</span><br></pre></td></tr></table></figure>

<p>查看结果</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show profiles;</span><br></pre></td></tr></table></figure>

<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596278164535.png" alt="1596278164535"></p>
<p>诊断SQL</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show profile cpu, block io for query ID(上一步前面的问题SQL数字号码); </span><br></pre></td></tr></table></figure>

<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596281249332.png" alt="1596281249332"></p>
<p>需要注意的:</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596281293913.png" alt="1596281293913"></p>
<h2 id="全局查询日志"><a href="#全局查询日志" class="headerlink" title="全局查询日志"></a>全局查询日志</h2><h5 id="永远不要在生产环境开启这个功能-仅在测试环境使用"><a href="#永远不要在生产环境开启这个功能-仅在测试环境使用" class="headerlink" title="永远不要在生产环境开启这个功能,仅在测试环境使用."></a>永远不要在生产环境开启这个功能,仅在测试环境使用.</h5><p>配置开启:</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596283157110.png" alt="1596283157110"></p>
<p>编码开启:</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596283183562.png" alt="1596283183562"></p>
<h2 id="数据库锁"><a href="#数据库锁" class="headerlink" title="数据库锁"></a>数据库锁</h2><p>锁是计算机协调多个进程或线程并发访问某一资源的机制.在数据库中,除传统的计算资源(如CPU,RAM,I&#x2F;O等)的争用以外,数据也是供许多用户共享的资源.如何保证数据并发访问的一致性、有效性hi所有数据库必须解决的一个问题，锁冲突也是影响数据库并发访问的一个重要因素。从这个角度来说，锁对数据库而言显得尤其重要，也更加复杂。</p>
<h3 id="锁的分类"><a href="#锁的分类" class="headerlink" title="锁的分类"></a>锁的分类</h3><p>从对数据操作的类型(读\写)分</p>
<blockquote>
<p>读锁(共享锁): 针对同一份数据,多个读操作可以同时进行而不会互相影响</p>
<p>写锁(排他锁): 当前写操作没有完成前,它会阻断其他写锁和读锁;</p>
</blockquote>
<p>从对数据操作的粒度分</p>
<blockquote>
<p>表锁</p>
<p>行锁</p>
</blockquote>
<h3 id="MYSQL锁机制"><a href="#MYSQL锁机制" class="headerlink" title="MYSQL锁机制"></a>MYSQL锁机制</h3><h5 id="三锁-↓"><a href="#三锁-↓" class="headerlink" title="三锁 ↓"></a>三锁 ↓</h5><h3 id="表锁-偏读"><a href="#表锁-偏读" class="headerlink" title="表锁(偏读)"></a>表锁(偏读)</h3><p>特点:偏向MyISAM存储引擎,开销小,加锁快;无死锁;锁定粒度大,发生锁冲突的概率最高,并发度最低</p>
<p>案例:</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596287138753.png" alt="1596287138753"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596287239538.png" alt="1596287239538"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596287470060.png" alt="1596287470060"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596287910808.png" alt="1596287910808"></p>
<p>读操作时共享的,会话1和2都可以读mylock;</p>
<p>会话1不能更新表;</p>
<p>会话1只能读加读锁的mylock表,不能读其他表(book);会话2可以读其他表.</p>
<p>会话2如果要更新表,会形成阻塞,要<strong>等待锁的释放</strong>(unlock tables)</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596288189317.png" alt="1596288189317"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596288256700.png" alt="1596288256700"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596288286059.png" alt="1596288286059"></p>
<h5 id="写锁"><a href="#写锁" class="headerlink" title="写锁"></a>写锁</h5><p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596293163830.png" alt="1596293163830"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596293452648.png" alt="1596293452648"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596293310415.png" alt="1596293310415"></p>
<p>其他会话读被锁的表会阻塞;</p>
<p>结论:<img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596293501087.png" alt="1596293501087"></p>
<p>简而言之,就是读锁会阻塞写,但是不会堵塞读,而写锁则会把读和写都堵塞.</p>
<h5 id="看看哪些表被锁了"><a href="#看看哪些表被锁了" class="headerlink" title="看看哪些表被锁了"></a>看看哪些表被锁了</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show open tables;</span><br></pre></td></tr></table></figure>

<h5 id="如何分析表锁定"><a href="#如何分析表锁定" class="headerlink" title="如何分析表锁定"></a>如何分析表锁定</h5><p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596294625538.png" alt="1596294625538"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596294765205.png" alt="1596294765205"></p>
<h3 id="行锁-偏写"><a href="#行锁-偏写" class="headerlink" title="行锁(偏写)"></a>行锁(偏写)</h3><p><strong>特点</strong>：偏向InnoDB存储引擎，开销大，加锁慢；会出现死锁；锁定粒度最小，发生锁冲突的概率最低，并发度也最高。</p>
<p>InnoDB与MyISAM的最大不同也有两点：</p>
<p>一是支持事务(TRANSACTION);</p>
<p>二是采用了行级锁.</p>
<h5 id="事务-Transaction-及其ACID属性"><a href="#事务-Transaction-及其ACID属性" class="headerlink" title="事务(Transaction)及其ACID属性"></a>事务(Transaction)及其ACID属性</h5><p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596361613254.png" alt="1596361613254"></p>
<h5 id="并发处理事务带来的问题"><a href="#并发处理事务带来的问题" class="headerlink" title="并发处理事务带来的问题"></a>并发处理事务带来的问题</h5><blockquote>
<p>更新丢失(Lost Update)</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596361800362.png" alt="1596361800362"></p>
<p>脏读(Dirty Reads)</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596361853689.png" alt="1596361853689"></p>
<p>不可重复读(Non-Repeatable Reads)</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596361887110.png" alt="1596361887110"></p>
<p>幻读(Planttom Reads)</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596361949063.png" alt="1596361949063"></p>
</blockquote>
<h5 id="事务隔离级别"><a href="#事务隔离级别" class="headerlink" title="事务隔离级别;"></a>事务隔离级别;</h5><p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596362019625.png" alt="1596362019625"></p>
<p>默认级别是Repeatable read</p>
<h4 id="案例分析"><a href="#案例分析" class="headerlink" title="案例分析:"></a>案例分析:</h4><p>建表</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596362218502.png" alt="1596362218502"></p>
<p>select * from test_innodb_lock;</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596362340762.png" alt="1596362340762"></p>
<p>在没session1和2提交commit之前,session-2读不到修改的数据. </p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596362749535.png" alt="1596362749535"></p>
<p>操作不同行,不会阻塞</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596363091362.png" alt="1596363091362"></p>
<h5 id="无索引行锁变表锁"><a href="#无索引行锁变表锁" class="headerlink" title="无索引行锁变表锁;"></a>无索引行锁变表锁;</h5><p>类型转换,索引失效:  (b&#x3D;’4000’)</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596364172827.png" alt="1596364172827"></p>
<p>行锁变表锁,造成阻塞.</p>
<h5 id="间隙锁的危害"><a href="#间隙锁的危害" class="headerlink" title="间隙锁的危害"></a>间隙锁的危害</h5><p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596367264611.png" alt="1596367264611"></p>
<p>session2会阻塞,</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596367511520.png" alt="1596367511520"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596367327059.png" alt="1596367327059"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596367354502.png" alt="1596367354502"></p>
<h5 id="如何锁定一行"><a href="#如何锁定一行" class="headerlink" title="如何锁定一行"></a>如何锁定一行</h5><p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596367801141.png" alt="1596367801141"></p>
<p>行锁总结</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596368151351.png" alt="1596368151351"></p>
<h5 id="如何分析行锁定"><a href="#如何分析行锁定" class="headerlink" title="如何分析行锁定"></a>如何分析行锁定</h5><p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596368219445.png" alt="1596368219445"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596368336057.png" alt="1596368336057"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596368378801.png" alt="1596368378801"></p>
<p>优化建议:</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596368467316.png" alt="1596368467316"></p>
<h3 id="页锁"><a href="#页锁" class="headerlink" title="页锁"></a>页锁</h3><p>开销和加锁时间界于表锁和行锁之间,会出现死锁;锁定粒度界于表锁和行锁之间,并发度一般.</p>
<h2 id="主从复制"><a href="#主从复制" class="headerlink" title="主从复制"></a>主从复制</h2><h4 id="复制的基本原理："><a href="#复制的基本原理：" class="headerlink" title="复制的基本原理："></a>复制的基本原理：</h4><blockquote>
<p>slave会从master读取binlog来进行数据同步</p>
</blockquote>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596372268011.png" alt="1596372268011"></p>
<h4 id="复制的基本原则："><a href="#复制的基本原则：" class="headerlink" title="复制的基本原则："></a>复制的基本原则：</h4><blockquote>
<p>每个slave只有一个master</p>
<p>每个slave只能有一个唯一的服务器ID</p>
<p>每个master可以有多个slave</p>
</blockquote>
<h4 id="复制的最大问题："><a href="#复制的最大问题：" class="headerlink" title="复制的最大问题："></a>复制的最大问题：</h4><p>延时</p>
<h4 id="一主一从常见配置："><a href="#一主一从常见配置：" class="headerlink" title="一主一从常见配置："></a>一主一从常见配置：</h4><blockquote>
<p>mysql版本要一致且后台以服务运行. 网段要相通ping</p>
<p>主从都配置在[mysqld]结点下,都是小写.</p>
<p>主机(window)修改my.ini配置文件</p>
<ul>
<li><p>主服务器唯一ID[<code>必须</code>]</p>
<ul>
<li>server-id &#x3D; 1</li>
</ul>
</li>
<li><p>启动二进制日志[<code>必须</code>]</p>
<p>log-bin&#x3D;自己本地的路径&#x2F;mysqlbin</p>
<p>log-bin&#x3D;D:&#x2F;devSoft&#x2F;MySQLServer5.5&#x2F;data&#x2F;mysqlbin</p>
</li>
<li><p>启用错误日志[<code>可选</code>]</p>
<p>log-err &#x3D; 自己本地的路径&#x2F;mysqlerr</p>
<p>log-err &#x3D; D:&#x2F;devSoft&#x2F;MySQLServer5.5&#x2F;data&#x2F;mysqlerr</p>
</li>
<li><p>根目录[<code>可选</code>]</p>
<p>basedir &#x3D; “自己本地路径”</p>
<p>basedir &#x3D; “D:&#x2F;devSoft&#x2F;MySQLServer5.5&#x2F;“</p>
</li>
<li><p>临时目录[<code>可选</code>]</p>
<p>tmpdir &#x3D; “自己本地路径”</p>
<p>tmpdir &#x3D; “D:&#x2F;devSoft&#x2F;MySQLServer5.5&#x2F;“</p>
</li>
<li><p>数据目录[<code>可选</code>]</p>
<p>datadir &#x3D; “自己本地路径&#x2F;Data&#x2F;“</p>
<p>datadir &#x3D; “D:&#x2F;devSoft&#x2F;MySQLServer5.5&#x2F;Data&#x2F;“</p>
</li>
<li><p>read-only&#x3D;0</p>
<p>主机, 读写都可以</p>
</li>
<li><p>设置不要复制的数据库[<code>可选</code>]</p>
<p>binlog-ignore-db&#x3D;mysql</p>
</li>
<li><p>设置需要复制的数据库[<code>可选</code>]</p>
<p>binlog-do-db&#x3D;需要复制的主数据库名字</p>
</li>
</ul>
<p>从机(Linux)修改my.cnf配置文件</p>
<p>从服务器唯一ID[<code>必须</code>]</p>
<p>注释 server-id&#x3D;1</p>
<p>下翻,取消注释server-id &#x3D; 2</p>
<p>启动二进制日志[<code>可选</code>]</p>
<p>因修改过配置文件,请主机+从机都重启后台mysql服务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">service mysql stop</span><br><span class="line">service mysql start</span><br><span class="line">ps -ef|grep mysql</span><br></pre></td></tr></table></figure>

<p>主机从机都关闭防火墙</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">window 手动关闭</span><br><span class="line">linux从机  service iptables stop</span><br></pre></td></tr></table></figure>

<p>在window主机上建立账户并授权slave</p>
<p>mysql</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596381866992.png" alt="1596381866992"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flush privileges</span><br></pre></td></tr></table></figure>

<p>查看master的状态</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show master status;</span><br></pre></td></tr></table></figure>

<p>记录下File和Position的值.</p>
<p><strong>Position</strong>在后面使用后会有变化</p>
<p>在linux从机上配置需要复制的主机</p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596382399568.png" alt="1596382399568"></p>
<p><img data-src="https://cdn.kayleh.top/gh/kayleh/cdn/img/MYSQL/1596382484275.png" alt="1596382484275"></p>
<p>启动从服务器复制功能</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">start slave;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">show slave status\G</span><br><span class="line">下面两个参数都是Yes,则说明主从配置成功.</span><br><span class="line">Slave_IO_Running:Yes</span><br><span class="line">Slave_SQL_Running:Yes</span><br></pre></td></tr></table></figure>

<p>主机建库,建表</p>
<p>insert记录</p>
<p>从机有记录</p>
<p>停止从机复制功能</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stop slave;</span><br></pre></td></tr></table></figure>

</blockquote>

    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>Post author:  </strong>Kayleh
  </li>
  <li class="post-copyright-link">
      <strong>Post link: </strong>
      <a href="https://blog.kayleh.top/posts/mysql" title="MYSQL">https://blog.kayleh.top/posts/mysql</a>
  </li>
  <li class="post-copyright-license">
      <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC8="><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</span> unless stating additionally.
  </li>
</ul>
</div>

          <div class="followme">
  <span>Welcome to my other publishing channels</span>

  <div class="social-list">

      <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
      </div>
  </div>
</div>

          <div class="post-tags">
              <a href="/tags/sql/" rel="tag"><i class="fa fa-tag"></i> sql</a>
          </div>

        
  <div class="social-like a2a_kit a2a_kit_size_32 a2a_default_style">
    <a class="a2a_dd" target="_blank" rel="noopener" href="https://www.addtoany.com/share"></a>
      <a class="a2a_button_facebook"></a>
      <a class="a2a_button_twitter"></a>
  </div>

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/posts/http" rel="prev" title="HTTP">
                  <i class="fa fa-angle-left"></i> HTTP
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/posts/springcloud" rel="next" title="SpringCloud">
                  SpringCloud <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2019 – 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">true</span>
  </div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script size="300" alpha="0.6" zIndex="-1" src="https://cdnjs.cloudflare.com/ajax/libs/ribbon.js/1.0.2/ribbon.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.umd.js" integrity="sha256-a+H7FYzJv6oU2hfsfDGM2Ohw/cR9v+hPfxHCLdmCrE8=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.1.0/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>
<script src="//code.tidio.co/dq5klo9ydptaxokj83vcwnusf63dogzr.js"></script>
<script src="/js/third-party/chat/tidio.js"></script>




  <script src="/js/third-party/fancybox.js"></script>

  <script src="/js/third-party/pace.js"></script>

  <script src="/js/third-party/addtoany.js"></script>

  
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"ams","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"Kayleh","repo":"kayleh.top.giscus","client_id":"Ov23liJZlhhVSuSynF9Q","client_secret":"d16c7023956f130d20927ad469dfe83295864094","admin_user":"Kayleh","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":null,"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.min.js","integrity":"sha256-MVK9MGD/XJaGyIghSVrONSnoXoGh3IFxLw0zfvzpxR4="},"path_md5":"fd60f9711015571593aeb213cff756d0"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

</body>
</html>
